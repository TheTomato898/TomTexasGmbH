<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="main.css">
  <script type="module">
      // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAJjmyFnA-IW0jDIpm3uI0e0Nt_MyNi93w",
    authDomain: "tomtexasgmbh-einsendungen.firebaseapp.com",
    databaseURL: "https://tomtexasgmbh-einsendungen-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "tomtexasgmbh-einsendungen",
    storageBucket: "tomtexasgmbh-einsendungen.firebasestorage.app",
    messagingSenderId: "959560149638",
    appId: "1:959560149638:web:a930d31d1a835849507f07"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  // get ref to database services
  const db = getDatabase(app);

function showToast(message, type = "success") {
  const toast = document.getElementById("toast");
  toast.textContent = message;

  toast.className = "";
  toast.classList.add("show");

  if (type === "error") {
    toast.classList.add("error");
  }

  setTimeout(() => {
    toast.classList.remove("show");
  }, 3000);
}

window.addEventListener("DOMContentLoaded", () => {

  document.getElementById('form').addEventListener('submit', async (e) => {
    e.preventDefault();

    const button = document.querySelector("button[type='submit']");
    button.disabled = true;
    button.textContent = "Wird gesendet...";

    const vorname = document.getElementById('Vorname').value.trim();
    const nachname = document.getElementById('Name').value.trim();
    const kontakt = document.getElementById('kontakt').value.trim();
    const nachricht = document.getElementById('Nachricht').value.trim();
    const honeypot = document.getElementById('website')?.value;

    if (honeypot) return;

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const phoneRegex = /^\+?[0-9\s\-]{7,15}$/;

    let kontaktart;

    if (emailRegex.test(kontakt)) {
      kontaktart = "email";
    } else if (phoneRegex.test(kontakt)) {
      kontaktart = "telefon";
    } else {
      showToast("Bitte gültige E-Mail oder Handynummer eingeben.", "error");
      button.disabled = false;
      button.textContent = "Senden";
      return;
    }

    try {
      await set(ref(db, 'einsendungen/' + Date.now()), {
        name: vorname + " " + nachname,
        kontakt: kontakt,
        nachricht: nachricht,
      });

      showToast("Nachricht erfolgreich gesendet.");
      document.getElementById('form').reset();

    } catch (error) {
      showToast("Fehler beim Senden. Bitte erneut versuchen.", "error");
    }

    button.disabled = false;
    button.textContent = "Senden";
  });

});
</script>
  </script>
  <title>TomTexasGmbH|Kontakt</title>
  <link rel="icon" type="image/x-icon" href="favicon.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
<div id="toast"></div>
  <!-- HEADER -->
  <header>
    <div class="container">
      <nav>
        <ul class="navbar">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="kontakt.html">Kontakt</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main>

    <section class="content">
      <div class="container">

        <h1>Strategischer Austausch</h1>

        <p>Sie sehen Potenzial – wir auch.</p>

        <p>
          Für eine diskrete Erstabstimmung erreichen Sie uns unter:
        </p>

        <form id="form">
          <div class="name-row">
            <div>
              <label for="Vorname">Vorname</label>
              <input type="text" id="Vorname" placeholder="Max">
            </div>

            <div>
              <label for="Name">Nachname</label>
              <input type="text" id="Name" placeholder="Mustermann">
            </div>
          </div>
          <p>
            <label for="kontakt">E-Mail oder Handynummer</label>
            <input 
              type="text" 
              id="kontakt" 
              placeholder="max@example.com oder +491761234567"
              required
            >
            <input type="text" id="website" style="display:none">
          </p>
          <p>
            <label for="Nachricht">Nachricht an uns</label>
            <textarea name="Nachricht" rows="10" id="Nachricht"></textarea>
          </p>
          <p>
            <button type="submit" id="submit">Senden</button>
            <p class="datenschutz-hinweis">
              Mit Absenden der Nachricht stimmen Sie unserer 
            <a href="datenschutz.html" target="_blank">Datenschutzerklärung</a> zu.
          </p>
          </p>
        </form>

      </div>
    </section>

  </main>
  <!-- FOOTER -->
<footer>
  <div class="container">
    <div class="footer-content">

      <div>
        <p><strong>TomTexasGmbH</strong></p>
        <p>Strategische Skalierung & nachhaltige Wertschöpfung.</p>
      </div>

      <div>
        <p><a href="disclaimer.html">Haftungsausschluss</a></p>
        <p><a href="datenschutz.html">Datenschutz</a></p>
        <p><a href="kontakt.html">Kontakt</a></p>
      </div>

      <div>
        <p>© 2026 TomTexasGmbH</p>
        <p>Alle Rechte vorbehalten</p>
      </div>

    </div>
  </div>
</footer>

</body>
</html>